# GPT Translator

Этот проект представляет собой сервис для перевода статей медицинской тематики с использованием OpenAI ChatGPT. Сервис состоит из двух частей:
1. **Backend** на FastAPI, который обрабатывает запросы на перевод.
2. **Frontend** на Streamlit, который предоставляет удобный интерфейс для взаимодействия с сервисом.

## Основные функции
- Перевод медицинских статей с использованием ассистента OpenAI ChatGPT.
- Функциональность пользователей 
  - Регистрация и аутентификация пользователей
  - Учет использованных пользователем токенов
- Ввеление глоссария терминов для уточнения перевода
  - Учёт глоссария при переводе
  - Возможность добавления и удаления терминов 
  - Разграничение глоссария по ролям: администратор (общий глоссарий) и пользователь (приватный глоссарий).
- Сбор пар переводов для дальнейшего дообучения ассистента 
- Возможность запуска как с фронтендом, так и без него (только API).

## Технологии
- **Backend**: FastAPI (Python)
- **Frontend**: Streamlit (Python)
- **AI**: OpenAI ChatGPT

---

## Требования
- Python 3.10 или выше
- Установленные зависимости (см. раздел "Запуск без Docker")
- Ключ API OpenAI (OPENAI_API_KEY)

---

## Сборка и запуск

### Запуск с использованием Docker

#### 1. Сборка Docker-образа

Соберите Docker-образ с помощью следующей команды:

```bash
docker build --build-arg FRONTEND=true -t GPT_translator . 
```

- `FRONTEND=true` — включает фронтенд на Streamlit.
- Если фронтенд не нужен, используйте `FRONTEND=false`.

#### 2. Запуск контейнера

Запустите контейнер с помощью следующей команды:

```bash 
docker run \  
-e OPENAI_API_KEY="your_openai_api_key_here" \  
-p 8000:8000 \  
-p 8502:8502 \  
GPT_translator
``` 

- `-e OPENAI_API_KEY` — передаёт ваш ключ OpenAI API.
- `-p 8000:8000` — пробрасывает порт для FastAPI (бэкенд).
- `-p 8502:8502` — пробрасывает порт для Streamlit (фронтенд).

#### 3. Доступ к сервису

- **FastAPI (бэкенд)**: Доступен по адресу http://localhost:8000.
- **Streamlit (фронтенд)**: Доступен по адресу http://localhost:8502.

---

### Запуск без Docker

#### 1. Установка зависимостей

Убедитесь, что у вас установлен Python 3.10 или выше. Затем установите зависимости:

```bash 
pip install -r app/requirements.txt 
```

Если вы хотите использовать фронтенд, установите дополнительные зависимости:

```bash 
pip install -r frontend/requirements.txt
``` 

#### 2. Настройка переменных окружения

Создайте файл .env в корне проекта и добавьте в него переменную окружения:

```env 
OPENAI_API_KEY=your_openai_api_key_here 
```

Также переменную можно создать стандартными методами.

#### 3. Запуск бэкенда (FastAPI)

Запустите FastAPI-сервер:

```bash 
uvicorn app.main:app --host 0.0.0.0 --port 8000 
```

Сервер будет доступен по адресу `http://localhost:8000`.

#### 4. Запуск фронтенда (Streamlit, опционально)

Если вы хотите использовать фронтенд, запустите Streamlit:

bash streamlit run frontend/app.py --server.port 8502 --server.address 0.0.0.0 

Фронтенд будет доступен по адресу http://localhost:8502.

#### 4. Запуск через скрипт

Всё приложение можно запустить через скрипт run.sh

```bash 
FRONTEND=true ./run.sh 
```
- `FRONTEND=true` — включает фронтенд на Streamlit.
- Если фронтенд не нужен, используйте `FRONTEND=false`.

---

## Использование

### Через Streamlit (фронтенд)
1. Откройте http://localhost:8502 в браузере.
2. Загрузите текст медицинской статьи в текстовое поле.
3. Нажмите кнопку "Перевести", чтобы получить перевод.

### Через FastAPI (бэкенд)
Вы можете отправлять запросы к API напрямую. Описание endopints можно найти в http://localhost:8000/docs

---

## Автор
Рыженко Виктор